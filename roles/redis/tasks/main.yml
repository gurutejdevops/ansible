- name: copyig the redis rep
  ansible.builtin.copy:
    src: redis.repo
    dest: /etc/yum.repos.d/redis.repo

# - name: copyig the redis rep
#   ansible.builtin.get_url:
#     url: https://raw.githubusercontent.com/stans-robot-project/redis/main/redis.repo
#     dest: /etc/yum.repos.d/redis.repo

- name: Install Redis
  ansible.builtin.yum:
    name: redis-6.2.13
    state: present
    update_cache: yes

- name: Update the BindIP from 127.0.0.1 to 0.0.0.0 in config 
  ansible.builtin.replace:
    path: /etc/redis.conf
    regexp: '127\.0\.0\.1'
    replace: '0.0.0.0'
    backup: yes  

- name: Update the BindIP from 127.0.0.1 to 0.0.0.0 in /etc/redis/redis.conf config 
  ansible.builtin.replace:
    path: /etc/redis/redis.conf
    regexp: '127\.0\.0\.1'
    replace: '0.0.0.0'
    backup: yes 

- name: enable and start redis
  ansible.builtin.systemd:
    name: redis
    enabled: yes
    state: started
    
    
